#  불필요한 객체 생성을 피하라

## 들어가기
똑같은 기능의 객체를 매번 생성하기보다는 객체 하나를 재사용하는 편이 나을때가 많다.
재사용은 빠르고 세련되다.
---
## String 생성의 잘못된 예

### 하지 말아야 할 극단적인 예

```java
String s = new String("bikini");
```

- `"bikini"`라는 문자열 리터럴은 이미 상수 풀에 존재.
- `new String()`으로 또 새로운 인스턴스를 생성 → 메모리 낭비

### 올바른 사용법

```java
String s = "bikini";
```

- `"bikini"` 리터럴을 상수 풀에서 재사용.

---
- 생성자 대신 정적 팩터리 메서드(아이템 1) 사용 -> 불필요한 객체(비싼 객체) 생성 피하기 가능!
- 단 자신이 만드는 객체가 비싼 객체인지를 명확이 알 수 없다.


## 오토박싱(AutoBoxing) 주의

> **오토박싱(AutoBoxing)**:  
자바의 오토박싱(AutoBoxing) 은 기본형(primitive) 타입을 자동으로 참조형 (wrapper)타입으로 변환해주는 기능 

### 🔷 예제

```java
Long sum = 0L;

for (long i = 0; i <= Integer.MAX_VALUE; i++) {
    sum += i;
}
```

### 🔷 문제점

- `sum`의 타입이 **Long** (래퍼 클래스)라서 매 루프마다 새로운 `Long` 객체가 생성됩니다.
- `sum += i` 연산 시:
  - `i`(long) → 박싱 → Long
  - `sum`과 더하고 → 새로운 Long 객체 생성
  - 결과적으로 **매번 새로운 객체가 힙에 할당됨**

### 🔷 개선 방안

- `sum`을 **long**으로 선언하면 불필요한 박싱/언박싱이 사라짐.

```java
long sum = 0L;

for (long i = 0; i <= Integer.MAX_VALUE; i++) {
    sum += i;
}
```

> **long은 스택에 값으로 저장되므로 훨씬 빠르고 효율적입니다.**
> ** 객체 생성을 피하고자 객체 풀(pool)을 만들지는 말자 **
- 오토박싱은 기본 타입과 그에 대응하는 박싱된 기본 타입 구분을 흐려주지만, 완전히 없애주지는 않음
- 단 성능에서는 그렇지 않음 -> 박싱된 기본타입보다 의도치 않은 오토박싱이 숨어들지 않도록 주의
---



## 비고

| 항목      | 잘못된 예                  | 올바른 예          |
|-----------|----------------------------|--------------------|
| **String** | `new String("bikini")`   | `"bikini"`         |
| **sum**   | `Long sum = 0L;`          | `long sum = 0L;`   |

> **가능하면 기본형을 사용하고, 상수 풀에 있는 객체를 재사용하라.**
> ** Item 50 (방어적 복사)와 비교해보기 **

